require('fs').readFile('./input.txt', 'utf8', (_, c) =>
    console.log(((m, I, O=[]) => (
      ((x, i=0) => { while(i > -1) i=x(i) })(i =>
          ((c, p) => [
            () => -1,
            () => (m[m[i+3]] = p(1) + p(2), i+4),
            () => (m[m[i+3]] = p(1) * p(2), i+4),
            () => (m[m[i+1]] = I.shift(), i+2),
            () => (O.push(p(1)), i+2),
            () => (p(1) ? p(2) : i+2),
            () => (p(1) ? i+2 : p(2)),
            () => (m[m[i+3]] = +(p(1) < p(2)), i+4),
            () => (m[m[i+3]] = +(p(1) === p(2)), i+4)
        ][c]())(m[i] % 100 % 99, (n, z=10**(n+2)) => m[m[i] % z > z/10 ? i+n : m[i+n]])
    ), O))(c.split(',').map(n => +n), [1])))
